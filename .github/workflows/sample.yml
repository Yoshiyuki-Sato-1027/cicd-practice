name: Hello World Workflow

on:
  push:
    branches:
      - master
  pull_request:
    branches:
      - master

jobs:
  say_hello:
    runs-on:
      ubuntu-latest
      # 環境変数の定義はjobレベル
    env: # 環境変数の定義
      BRANCH: main # 「BRANCH」という名前の環境変数へ、「main」という値をセット
      ACTOR: ${{ github.actor }} # コンテキストの値を環境変数へセット

    steps:
      - name: Checkout code
        uses: actions/checkout@v2

      - name: Print Hello World
        run: echo "Hello World"
      - name: ワークフロー実行者のログ
        run: echo "${{ github.actor }}" # githubコンテキストの参照
      - name: プルリクのタイトル
        run: echo "${{ github.event.pull_request.title }}" # github.eventプロパティはオブジェクト型

      - name: 環境変数をecho
        run: echo "${BRANCH}" # シェルコマンドからジョブレベルの環境変数を参照

        env:
          BRANCH: ブランチをオーバーライドしてます
          run: echo "${ env.BRANCH }"

      - name: GITHUB_ACTOR
        run: echo "${GITHUB_ACTOR}"
      - name: github.actor
        run: echo "${{ github.actor }}"

      - name: 中間環境変数でActorにアクセス
        run: echo "${ACTOR}" # 環境変数経由でコンテキストのプロパティを参照
